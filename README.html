<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>readme</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="README_files/libs/clipboard/clipboard.min.js"></script>
<script src="README_files/libs/quarto-html/quarto.js"></script>
<script src="README_files/libs/quarto-html/popper.min.js"></script>
<script src="README_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="README_files/libs/quarto-html/anchor.min.js"></script>
<link href="README_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="README_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="README_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="README_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="README_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<section id="idf-analysis-tool" class="level1">
<h1>IDF Analysis Tool</h1>
<section id="table-of-contents" class="level2">
<h2 class="anchored" data-anchor-id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#idf-analysis-tool">IDF Analysis Tool</a>
<ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#class-idfanalysis">Class: IDFAnalysis</a></li>
<li><a href="#examples">Examples</a>
<ul>
<li><a href="#step-1-prepare-your-data"><strong>Step 1: Prepare Your Data</strong></a></li>
<li><a href="#step-2-initialize-the-idf-analysis-class"><strong>Step 2: Initialize the IDF Analysis Class</strong></a>
<ul>
<li><a href="#plot-cdf-models">Plot CDF Models</a></li>
<li><a href="#plot-q-q-models">Plot Q-Q Models</a></li>
<li><a href="#fitting-model-overview-model">Fitting Model Overview <code>model</code></a></li>
<li><a href="#statistical-distributions-distribution">Statistical distributions <code>distribution</code></a></li>
</ul></li>
<li><a href="#step-3-select-a-model-for-fitting-the-idf-curve"><strong>Step 3: Select a Model for Fitting the IDF Curve</strong></a>
<ul>
<li><a href="#idf-equations-overview-idf_type">IDF Equations Overview <code>IDF_type</code></a>
<ul>
<li><a href="#idf-equation-type-i"><em>IDF Equation Type I</em></a></li>
<li><a href="#idf-equation-type-ii"><em>IDF Equation Type II</em></a></li>
<li><a href="#idf-equation-type-iii"><em>IDF Equation Type III</em></a></li>
<li><a href="#idf-equation-type-iv"><em>IDF Equation Type IV</em></a></li>
<li><a href="#idf-equation-type-v"><em>IDF Equation Type V</em></a></li>
</ul></li>
</ul></li>
<li><a href="#step-4-get-idf-table-for-selected-fit-model"><strong>Step 4: Get IDF Table for selected fit model</strong></a></li>
<li><a href="#analyze-idf-curves"><strong>Analyze IDF Curves</strong></a></li>
</ul></li>
<li><a href="#visualizations">Visualizations</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#license">License</a></li>
</ul></li>
</ul>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The IDF Analysis Tool is a Python-based solution for performing Intensity-Duration-Frequency (IDF) analysis on rainfall data. This tool encapsulates methods for calculating annual maximum intensities, fitting statistical models, generating IDF curves, and plotting results.</p>
<p>IDF analysis is crucial in hydrological studies and water resource management, providing essential information for the design of drainage systems, flood control structures, and other water-related infrastructure.</p>
</section>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p>To use the IDF Analysis Tool, you need to have Python installed on your system. Additionally, you’ll need to install the following dependencies:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pandas numpy scipy matplotlib fitter statsmodels</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You’ll also need to ensure you have the <code>Julia_Genextreme</code> module available in your Python environment.</p>
</section>
<section id="usage" class="level2">
<h2 class="anchored" data-anchor-id="usage">Usage</h2>
<p>To use the IDF Analysis Tool, you need to import the <code>IDFAnalysis</code> class from the module:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> idf_analysis <span class="im">import</span> IDFAnalysis</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="class-idfanalysis" class="level2">
<h2 class="anchored" data-anchor-id="class-idfanalysis">Class: IDFAnalysis</h2>
<p>The <code>IDFAnalysis</code> class is the core of this tool. It takes the following parameters during initialization:</p>
<ul>
<li><code>historic_hourly</code>: A pandas DataFrame containing historical hourly rainfall data.</li>
<li><code>Durations</code>: A numpy array of durations to analyze (in hours).</li>
<li><code>Return_periods</code>: A numpy array of return periods to calculate.</li>
<li><code>distribution</code>: The statistical distribution to use for fitting (default is ‘genextreme’).</li>
<li><code>model</code>: The model engine to use for fitting (‘scipy_stats’ or ‘Julia_stats’, default is ‘scipy_stats’).</li>
<li><code>method</code>: The method for fitting IDF curves (‘curve_fit’ or ‘least_squares’, default is ‘curve_fit’).</li>
<li><code>IDF_type</code>: The type of IDF equation to use (default is ‘IDF_typeI’).</li>
</ul>
</section>
<section id="examples" class="level2">
<h2 class="anchored" data-anchor-id="examples">Examples</h2>
<p>Let’s walk through a step-by-step example of how to use the IDF Analysis Tool:</p>
<section id="step-1-prepare-your-data" class="level3">
<h3 class="anchored" data-anchor-id="step-1-prepare-your-data"><strong>Step 1: Prepare Your Data</strong></h3>
<p>First, you need to prepare your historical hourly rainfall data in a pandas DataFrame format. Each column should represent a station, and the index should be the datetime.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load your data (replace with your actual data loading method)</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>historic_hourly <span class="op">=</span> pd.read_csv(<span class="st">'Rainfall.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>, parse_dates<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>historic_hourly</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/data_set.png" class="img-fluid figure-img"></p>
<figcaption>Data set</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define durations and return periods</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>Durations <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">24</span>])  <span class="co"># in hours</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>Return_periods <span class="op">=</span> np.array([<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">25</span>, <span class="dv">50</span>, <span class="dv">100</span>])  <span class="co"># in years</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>station <span class="op">=</span> historic_hourly.columns[<span class="dv">1</span>] <span class="co"># Select a station</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>station</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>1151</p>
</section>
<section id="step-2-initialize-the-idf-analysis-class" class="level3">
<h3 class="anchored" data-anchor-id="step-2-initialize-the-idf-analysis-class"><strong>Step 2: Initialize the IDF Analysis Class</strong></h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> historic_hourly[[station]]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>idf_analysis <span class="op">=</span> IDFAnalysis(data, </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                           Durations, </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                           Return_periods, </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                           model<span class="op">=</span><span class="st">'scipy_stats'</span>, </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                           distribution<span class="op">=</span><span class="st">'gumbel_r'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="plot-cdf-models" class="level4">
<h4 class="anchored" data-anchor-id="plot-cdf-models">Plot CDF Models</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>cdf_plot <span class="op">=</span> idf_analysis.plot_cdf_models(station_name)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>cdf_plot.savefig(<span class="st">'cdf_plot.png'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/cdf.png" class="img-fluid figure-img"></p>
<figcaption>Data set</figcaption>
</figure>
</div>
</section>
<section id="plot-q-q-models" class="level4">
<h4 class="anchored" data-anchor-id="plot-q-q-models">Plot Q-Q Models</h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>qq_plot <span class="op">=</span> idf_analysis.plot_qq_models(station_name)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>qq_plot.savefig(<span class="st">'qq_plot.png'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/qq.png" class="img-fluid figure-img"></p>
<figcaption>Data set</figcaption>
</figure>
</div>
</section>
<section id="fitting-model-overview-model" class="level4">
<h4 class="anchored" data-anchor-id="fitting-model-overview-model">Fitting Model Overview <code>model</code></h4>
<p>The distributions are available in both <code>scipy_stats</code> and <code>Julia</code> packages.</p>
<blockquote class="blockquote">
<p>⚠️ <strong>Note:</strong> The <code>Julia</code> package is only available for the <code>genextreme</code> distribution. This is because the <code>scipy_stats</code> package sometimes encounters issues with the <code>genextreme</code> distribution.</p>
</blockquote>
</section>
<section id="statistical-distributions-distribution" class="level4">
<h4 class="anchored" data-anchor-id="statistical-distributions-distribution">Statistical distributions <code>distribution</code></h4>
<p>Commonly used distributions include the <strong>Generalized Extreme Value</strong> (<code>genextreme</code>) and the <strong>Gumbel distribution</strong> (<code>gumbel_r</code>), which are frequently applied in <strong>extreme value analysis</strong>.</p>
</section>
</section>
<section id="step-3-select-a-model-for-fitting-the-idf-curve" class="level3">
<h3 class="anchored" data-anchor-id="step-3-select-a-model-for-fitting-the-idf-curve"><strong>Step 3: Select a Model for Fitting the IDF Curve</strong></h3>
<p>In this step, you can choose a statistical model to fit the IDF curve. The available models are <code>curve_fit</code>, <code>least_squares</code>, and <code>potential_regression</code>.</p>
<blockquote class="blockquote">
<p>⚠️ <strong>Note:</strong> The <code>curve_fit</code> and <code>least_squares</code> methods are applicable to all IDF equations. However, the <code>potential_regression</code> method is only applicable to the Type V IDF equation.</p>
</blockquote>
<p>By setting the <code>method</code> parameter to <code>'all'</code>, you instruct the analysis to evaluate the fit using all available methods: <code>curve_fit</code>, <code>least_squares</code>, and <code>potential_regression</code>. The output will be a summary table with the goodness-of-fit metrics for each method.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>goodness <span class="op">=</span> idf_analysis.goodness_of_fit(station, method<span class="op">=</span><span class="st">'all'</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>goodness</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/model_fit_idf.png" class="img-fluid figure-img"></p>
<figcaption>IDF_model</figcaption>
</figure>
</div>
<section id="idf-equations-overview-idf_type" class="level4">
<h4 class="anchored" data-anchor-id="idf-equations-overview-idf_type">IDF Equations Overview <code>IDF_type</code></h4>
<p>The Intensity-Duration-Frequency (IDF) equations are used to model the relationship between rainfall intensity, duration, and return period. Below are different types of IDF equations, each varying slightly in how they model these relationships.</p>
<section id="idf-equation-type-i" class="level5">
<h5 class="anchored" data-anchor-id="idf-equation-type-i"><em>IDF Equation Type I</em></h5>
<p>The equation for IDF Type I is defined as:</p>
<p><span class="math display">\[
I = \frac{d \cdot T + e}{(D + c)^b}
\]</span></p>
<ul>
<li><span class="math inline">\(T\)</span>: Return period.</li>
<li><span class="math inline">\(D\)</span>: Duration.</li>
<li><span class="math inline">\(b\)</span>, <span class="math inline">\(c\)</span>, <span class="math inline">\(d\)</span>, <span class="math inline">\(e\)</span>: Parameters of the equation.</li>
<li><span class="math inline">\(I\)</span>: Rainfall intensity.</li>
</ul>
</section>
<section id="idf-equation-type-ii" class="level5">
<h5 class="anchored" data-anchor-id="idf-equation-type-ii"><em>IDF Equation Type II</em></h5>
<p>The equation for IDF Type II is defined as:</p>
<p><span class="math display">\[
I = \frac{d \cdot T + e}{(D^b + c)}
\]</span></p>
<ul>
<li><span class="math inline">\(T\)</span>: Return period.</li>
<li><span class="math inline">\(D\)</span>: Duration.</li>
<li><span class="math inline">\(b\)</span>, <span class="math inline">\(c\)</span>, <span class="math inline">\(d\)</span>, <span class="math inline">\(e\)</span>: Parameters of the equation.</li>
<li><span class="math inline">\(I\)</span>: Rainfall intensity.</li>
</ul>
</section>
<section id="idf-equation-type-iii" class="level5">
<h5 class="anchored" data-anchor-id="idf-equation-type-iii"><em>IDF Equation Type III</em></h5>
<p>The equation for IDF Type III is defined as:</p>
<p><span class="math display">\[
I = \frac{d \cdot T^e}{(D + c)^b}
\]</span></p>
<ul>
<li><span class="math inline">\(T\)</span>: Return period.</li>
<li><span class="math inline">\(D\)</span>: Duration.</li>
<li><span class="math inline">\(b\)</span>, <span class="math inline">\(c\)</span>, <span class="math inline">\(d\)</span>, <span class="math inline">\(e\)</span>: Parameters of the equation.</li>
<li><span class="math inline">\(I\)</span>: Rainfall intensity.</li>
</ul>
</section>
<section id="idf-equation-type-iv" class="level5">
<h5 class="anchored" data-anchor-id="idf-equation-type-iv"><em>IDF Equation Type IV</em></h5>
<p>The equation for IDF Type IV is defined as:</p>
<p><span class="math display">\[
I = \frac{d \cdot T^e}{(D^b + c)}
\]</span></p>
<ul>
<li><span class="math inline">\(T\)</span>: Return period.</li>
<li><span class="math inline">\(D\)</span>: Duration.</li>
<li><span class="math inline">\(b\)</span>, <span class="math inline">\(c\)</span>, <span class="math inline">\(d\)</span>, <span class="math inline">\(e\)</span>: Parameters of the equation.</li>
<li><span class="math inline">\(I\)</span>: Rainfall intensity.</li>
</ul>
</section>
<section id="idf-equation-type-v" class="level5">
<h5 class="anchored" data-anchor-id="idf-equation-type-v"><em>IDF Equation Type V</em></h5>
<p>The equation for IDF Type V is defined as:</p>
<p><span class="math display">\[
I = \frac{d \cdot T^e}{D^b}
\]</span></p>
<ul>
<li><span class="math inline">\(T\)</span>: Return period.</li>
<li><span class="math inline">\(D\)</span>: Duration.</li>
<li><span class="math inline">\(b\)</span>, <span class="math inline">\(d\)</span>, <span class="math inline">\(e\)</span>: Parameters of the equation.</li>
<li><span class="math inline">\(I\)</span>: Rainfall intensity.</li>
</ul>
</section>
</section>
</section>
<section id="step-4-get-idf-table-for-selected-fit-model" class="level3">
<h3 class="anchored" data-anchor-id="step-4-get-idf-table-for-selected-fit-model"><strong>Step 4: Get IDF Table for selected fit model</strong></h3>
<p>It’s necessary to select the model and IDF equation type that best fit the distribution and the IDF curve data, based on the results from Step 3, to generate the most accurate IDF table.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>idf_model <span class="op">=</span> IDFAnalysis(data, Durations, Return_periods, distribution<span class="op">=</span><span class="st">'gumbel_r'</span>, model<span class="op">=</span><span class="st">'scipy_stats'</span>, method<span class="op">=</span><span class="st">'least_squares'</span>, IDF_type<span class="op">=</span><span class="st">'IDF_typeIV'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To obtain the IDF table and figure, you can use the <code>IDF_fit()</code> method:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>table_idf, idf_fig <span class="op">=</span> idf_model.IDF_fit(station, plot<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Table_idf</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/idf_table.png" class="img-fluid figure-img"></p>
<figcaption>IDF_table</figcaption>
</figure>
</div>
<p>Idf Figure</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/idf.png" class="img-fluid figure-img"></p>
<figcaption>IDF_figure</figcaption>
</figure>
</div>
</section>
<section id="analyze-idf-curves" class="level3">
<h3 class="anchored" data-anchor-id="analyze-idf-curves"><strong>Analyze IDF Curves</strong></h3>
<p>In this step, we selected the model that best fits the curves based on our data. However, upon analyzing the behavior in the figure, it’s evident that the fit for durations under one hour is quite poor. This issue arises because our data only has an hourly resolution. Ideally, we would obtain rainfall data with minute-level resolution. In such a case, we could use a different model as an alternative to improve the accuracy of the fit during the first minutes, particularly for durations shorter than an hour.</p>
<p>The poor fit in the first few minutes before completing the first hour is due to the low temporal resolution of the data, which only provides hourly information. This limitation prevents us from accurately capturing the high variability that occurs early on. In the literature, alternative approaches such as potential regression, using Equation 5, are recommended to model the increasing intensity typically observed in the initial minutes of an event. Although this approach may not achieve the best fit with the available data, it likely provides a more accurate representation of the intensity during those critical minutes before the first hour is reached. Below, we provide an example of how to apply this method.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>idf_model <span class="op">=</span> IDFAnalysis(data, Durations, Return_periods, distribution<span class="op">=</span><span class="st">'gumbel_r'</span>, model<span class="op">=</span><span class="st">'scipy_stats'</span>, method<span class="op">=</span><span class="st">'least_squares'</span>, IDF_type<span class="op">=</span><span class="st">'IDF_typeIV'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To obtain the IDF table and figure, you can use the <code>IDF_fit()</code> method:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>table_idf, idf_fig <span class="op">=</span> idf_model.IDF_fit(station, plot<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Idf Figure</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/idf_potential.png" class="img-fluid figure-img"></p>
<figcaption>IDF_figure</figcaption>
</figure>
</div>
</section>
</section>
<section id="visualizations" class="level2">
<h2 class="anchored" data-anchor-id="visualizations">Visualizations</h2>
<p>The IDF Analysis Tool provides several types of visualizations to help interpret the results:</p>
<ol type="1">
<li><p><strong>CDF Plots</strong>: These plots show the cumulative distribution function of the fitted model compared to the observed data for each duration.</p></li>
<li><p><strong>Q-Q Plots</strong>: These plots compare the quantiles of the theoretical distribution to the quantiles of the observed data, helping to assess the goodness of fit.</p></li>
<li><p><strong>IDF Curves</strong>: These plots show the fitted IDF curves along with the observed data points, allowing for visual comparison of the model fit to the data.</p></li>
</ol>
</section>
<section id="contributing" class="level2">
<h2 class="anchored" data-anchor-id="contributing">Contributing</h2>
<p>Contributions to the IDF Analysis Tool are welcome! Please feel free to submit pull requests, create issues, or suggest improvements.</p>
</section>
<section id="license" class="level2">
<h2 class="anchored" data-anchor-id="license">License</h2>
<p>…</p>
<hr>
<p>This README provides a comprehensive guide to using the IDF Analysis Tool. For more detailed information about specific methods or advanced usage, please refer to the inline documentation in the source code.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>